import os
import random
import time
import json
import telebot
from datetime import datetime
import locale

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª—å –¥–ª—è –¥–∞—Ç—ã
locale.setlocale(locale.LC_TIME, "ru_RU.UTF-8")

TOKEN = os.getenv("BOT_TOKEN")
CHANNEL_ID = os.getenv("CHANNEL_ID")

bot = telebot.TeleBot(TOKEN)

USED_FILE = "used_predictions.json"

# –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç –¢–∞—Ä–æ (78 –∫–∞—Ä—Ç)
tarot_cards = [
    # –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã + –º–∞—Å—Ç–∏
    "–®—É—Ç ‚Äî –Ω–∞—á–∞–ª–æ –ø—É—Ç–∏, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
    "–ú–∞–≥ ‚Äî —Å–∏–ª–∞ –≤–æ–ª–∏, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞",
    "–ñ—Ä–∏—Ü–∞ ‚Äî —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, –∏–Ω—Ç—É–∏—Ü–∏—è",
    "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ ‚Äî –∏–∑–æ–±–∏–ª–∏–µ, –∑–∞–±–æ—Ç–∞",
    "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –≤–ª–∞—Å—Ç—å",
    "–ñ—Ä–µ—Ü ‚Äî —Ç—Ä–∞–¥–∏—Ü–∏–∏, –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ",
    "–í–ª—é–±–ª—ë–Ω–Ω—ã–µ ‚Äî –≤—ã–±–æ—Ä, –≥–∞—Ä–º–æ–Ω–∏—è",
    "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞ ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥, –∫–æ–Ω—Ç—Ä–æ–ª—å",
    "–°–∏–ª–∞ ‚Äî –º—É–∂–µ—Å—Ç–≤–æ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º–æ—â—å",
    "–û—Ç—à–µ–ª—å–Ω–∏–∫ ‚Äî –ø–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, —É–µ–¥–∏–Ω–µ–Ω–∏–µ",
    "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã ‚Äî –ø–µ—Ä–µ–º–µ–Ω—ã, —Å—É–¥—å–±–∞",
    "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å ‚Äî —á–µ—Å—Ç–Ω–æ—Å—Ç—å, –±–∞–ª–∞–Ω—Å",
    "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π ‚Äî –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞, –∂–µ—Ä—Ç–≤–∞",
    "–°–º–µ—Ä—Ç—å ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ",
    "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –≥–∞—Ä–º–æ–Ω–∏—è, —Ç–µ—Ä–ø–µ–Ω–∏–µ",
    "–î—å—è–≤–æ–ª ‚Äî –∏—Å–∫—É—à–µ–Ω–∏—è, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏",
    "–ë–∞—à–Ω—è ‚Äî —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ –∏–ª–ª—é–∑–∏–π",
    "–ó–≤–µ–∑–¥–∞ ‚Äî –Ω–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ",
    "–õ—É–Ω–∞ ‚Äî –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, —Ç–∞–π–Ω—ã",
    "–°–æ–ª–Ω—Ü–µ ‚Äî —Ä–∞–¥–æ—Å—Ç—å, —è—Å–Ω–æ—Å—Ç—å",
    "–°—É–¥ ‚Äî –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, –Ω–æ–≤—ã–π —ç—Ç–∞–ø",
    "–ú–∏—Ä ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å",
] + [
    f"{rank} {suit}" for suit in ["–ñ–µ–∑–ª–æ–≤", "–ö—É–±–∫–æ–≤", "–ú–µ—á–µ–π", "–ü–µ–Ω—Ç–∞–∫–ª–µ–π"]
    for rank in ["–¢—É–∑", "–î–≤–æ–π–∫–∞", "–¢—Ä–æ–π–∫–∞", "–ß–µ—Ç–≤—ë—Ä–∫–∞", "–ü—è—Ç—ë—Ä–∫–∞", "–®–µ—Å—Ç—ë—Ä–∫–∞",
                 "–°–µ–º—ë—Ä–∫–∞", "–í–æ—Å—å–º—ë—Ä–∫–∞", "–î–µ–≤—è—Ç–∫–∞", "–î–µ—Å—è—Ç–∫–∞", "–ü–∞–∂", "–†—ã—Ü–∞—Ä—å",
                 "–ö–æ—Ä–æ–ª–µ–≤–∞", "–ö–æ—Ä–æ–ª—å"]
]

# –°—Ç–∞—Ä—Ç–æ–≤—ã–µ, —Å—Ä–µ–¥–Ω–∏–µ –∏ –∑–∞–≤–µ—Ä—à–∞—é—â–∏–µ —Ñ—Ä–∞–∑—ã
start_phrases = [
    "–ò–Ω—Ç—É–∏—Ü–∏—è —É–∫–∞–∂–µ—Ç –≤–µ—Ä–Ω—ã–π –ø—É—Ç—å", "–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è –ø—Ä–∏–Ω–µ—Å—ë—Ç —è—Å–Ω–æ—Å—Ç—å",
    "–°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –æ–±–µ—Ä–Ω—É—Ç—Å—è –≤ –≤–∞—à—É –ø–æ–ª—å–∑—É", "–î–µ–Ω—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω—ã",
    "–û–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–¥—Ç–æ–ª–∫–Ω—É—Ç –∫ –¥–µ–π—Å—Ç–≤–∏—é", "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å —Å—É—Ç—å",
    "–ü–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π —É—Å–∫–æ—Ä–∏—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥", "–ü–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
    "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –Ω–∞–π–¥—ë—Ç –≤–∞—Å –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç", "–°–∏–ª–∞ –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–æ—è–≤–∏—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ —è—Ä–∫–æ",
    "–õ—é–¥–∏ –≤–æ–∫—Ä—É–≥ –¥–∞–¥—É—Ç –≤–∞–∂–Ω—ã–π —Å–∏–≥–Ω–∞–ª", "–°–∏—Ç—É–∞—Ü–∏–∏ –æ—Ç–∫—Ä–æ—é—Ç —Å–∫—Ä—ã—Ç—ã–µ —Ä–µ—Å—É—Ä—Å—ã",
    "–í–∞—à–∞ —ç–Ω–µ—Ä–≥–∏—è –±—É–¥–µ—Ç –∑–∞–º–µ—Ç–Ω–∞ –æ–∫—Ä—É–∂–∞—é—â–∏–º", "–î–µ–Ω—å –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∑–Ω–∞–∫–æ–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏",
    "–£–ª—ã–±–∫–∞ —Å—É–¥—å–±—ã –∫–æ—Å–Ω—ë—Ç—Å—è –≤–∞—à–µ–≥–æ –ø—É—Ç–∏", "–ú–æ–º–µ–Ω—Ç—ã —Ç–∏—à–∏–Ω—ã –ø—Ä–∏–Ω–µ—Å—É—Ç –æ–∑–∞—Ä–µ–Ω–∏–µ",
    "–î–∞–∂–µ –º–µ–ª–æ—á–∏ –æ–∫–∞–∂—É—Ç—Å—è –∑–Ω–∞—á–∏–º—ã–º–∏", "–°–æ–±—ã—Ç–∏—è –ø–æ–¥—Å–∫–∞–∂—É—Ç –Ω–µ–æ–±—ã—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ",
    "–ú–∏—Ä –≤–æ–∫—Ä—É–≥ –Ω–∞—á–Ω—ë—Ç —Ä–µ–∑–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –≤–∞–º–∏", "–í–∞–º —É–¥–∞—Å—Ç—Å—è —É–ª–æ–≤–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏",
    "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏–Ω–µ—Å—É—Ç —Ä–∞–¥–æ—Å—Ç—å", "–≠–º–æ—Ü–∏–∏ –ø–æ–º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å",
    "–û–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–æ—è–≤—è—Ç –≤–∞—à—É —Å—Ç–æ–π–∫–æ—Å—Ç—å", "–î–µ–Ω—å –æ—Ç–∫—Ä–æ–µ—Ç –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã",
    "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–∞—Ö"
]

middle_phrases = [
    "–≤ —Ä–∞–±–æ—á–∏—Ö –¥–µ–ª–∞—Ö", "–≤ –ª–∏—á–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö", "–Ω–∞ –ø—É—Ç–∏ –∫ —Ü–µ–ª–∏",
    "–≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö", "–≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö", "–≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π",
    "–≤ –æ–±—â–µ–Ω–∏–∏ —Å –±–ª–∏–∑–∫–∏–º–∏", "–≤ –Ω–æ–≤—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö", "–≤ —Å—Ñ–µ—Ä–µ –∑–¥–æ—Ä–æ–≤—å—è",
    "–≤ –ø–æ–∏—Å–∫–µ –æ—Ç–≤–µ—Ç–æ–≤", "–≤ –ø–ª–∞–Ω–∞—Ö –Ω–∞ –±—É–¥—É—â–µ–µ", "–≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á–∞—Ö",
    "–≤ –¥–µ–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö", "–≤ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–∏ —Ç–∞–ª–∞–Ω—Ç–æ–≤", "–≤ —Ä–µ—à–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤",
    "–≤ —É—á–µ–±–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–∏", "–≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–¥–µ–π", "–≤ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–∏",
    "–≤ –ø–æ–∏—Å–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏", "–≤ –∑–∞–±–æ—Ç–µ –æ —Å–µ–±–µ", "–≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö",
    "–≤ –æ–±—â–µ–Ω–∏–∏ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏", "–≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö", "–≤ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö",
    "–≤ –æ—Ç–¥—ã—Ö–µ –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–∏"
]

end_phrases = [
    "–¥–∞–≤–∞—è —à–∞–Ω—Å —É–∫—Ä–µ–ø–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "–æ—Ç–∫—Ä—ã–≤–∞—è –¥–æ—Ä–æ–≥—É –∫ –Ω–æ–≤–æ–º—É –æ–ø—ã—Ç—É",
    "–ø–æ–º–æ–≥–∞—è –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Å–æ–º–Ω–µ–Ω–∏–π", "–ø—Ä–∏–Ω–æ—Å—è —á—É–≤—Å—Ç–≤–æ –≥–∞—Ä–º–æ–Ω–∏–∏",
    "—É—Å–∫–æ—Ä—è—è –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥", "–¥–∞—Ä—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ —Å–∏–ª—É",
    "–Ω–∞–ø–æ–ª–Ω—è—è –¥–µ–Ω—å –æ—â—É—â–µ–Ω–∏–µ–º —Å–≤–æ–±–æ–¥—ã", "–ø—Ä–∏–±–ª–∏–∂–∞—è –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã",
    "—Ä–∞–∑–¥–≤–∏–≥–∞—è –ø—Ä–∏–≤—ã—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã", "—Å–æ–∑–¥–∞–≤–∞—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ä–æ—Å—Ç–∞",
    "—É–∫—Ä–µ–ø–ª—è—è –≤–µ—Ä—É –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–ª—ã", "–ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞—è –∫ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–º —à–∞–≥–∞–º",
    "–Ω–∞–ø–æ–º–∏–Ω–∞—è –æ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–º–µ–Ω—Ç–∞", "—É–∫–ª–∞–¥—ã–≤–∞—è –ø–∞–∑–ª—ã –≤ —Ü–µ–ª—É—é –∫–∞—Ä—Ç–∏–Ω—É",
    "–¥–∞—Ä—è —á—É–≤—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è", "–Ω–∞–ø—Ä–∞–≤–ª—è—è —ç–Ω–µ—Ä–≥–∏—é –≤ —Å–æ–∑–∏–¥–∞—Ç–µ–ª—å–Ω–æ–µ —Ä—É—Å–ª–æ",
    "–ø–æ–∑–≤–æ–ª—è—è —É–≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç–æ–µ", "–æ—Ç–∫—Ä—ã–≤–∞—è –Ω–æ–≤—ã–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ã",
    "–ø–æ–º–æ–≥–∞—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å", "–ø—Ä–∏–¥–∞–≤–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ",
    "–¥–∞—Ä—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π", "—Å–æ–∑–¥–∞–≤–∞—è —à–∞–Ω—Å –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω",
    "–≤–¥–æ—Ö–Ω–æ–≤–ª—è—è –Ω–∞ –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—à–µ–Ω–∏—è", "–ø–æ–º–æ–≥–∞—è —É–≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
    "—É–∫—Ä–µ–ø–ª—è—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç–æ–π–∫–æ—Å—Ç—å"
]

# –ó–Ω–∞–∫–∏ –∑–æ–¥–∏–∞–∫–∞ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
zodiac_signs = [
    "‚ôàÔ∏è –û–≤–µ–Ω", "‚ôâÔ∏è –¢–µ–ª–µ—Ü", "‚ôäÔ∏è –ë–ª–∏–∑–Ω–µ—Ü—ã", "‚ôãÔ∏è –†–∞–∫", "‚ôåÔ∏è –õ–µ–≤", "‚ôçÔ∏è –î–µ–≤–∞",
    "‚ôéÔ∏è –í–µ—Å—ã", "‚ôèÔ∏è –°–∫–æ—Ä–ø–∏–æ–Ω", "‚ôêÔ∏è –°—Ç—Ä–µ–ª–µ—Ü", "‚ôëÔ∏è –ö–æ–∑–µ—Ä–æ–≥", "‚ôíÔ∏è –í–æ–¥–æ–ª–µ–π", "‚ôìÔ∏è –†—ã–±—ã"
]

compatibility = [
    "–û–≤–µ–Ω, –õ–µ–≤", "–¢–µ–ª–µ—Ü, –î–µ–≤–∞", "–ë–ª–∏–∑–Ω–µ—Ü—ã, –í–µ—Å—ã", "–†–∞–∫, –°–∫–æ—Ä–ø–∏–æ–Ω",
    "–õ–µ–≤, –°—Ç—Ä–µ–ª–µ—Ü", "–î–µ–≤–∞, –ö–æ–∑–µ—Ä–æ–≥", "–í–µ—Å—ã, –í–æ–¥–æ–ª–µ–π", "–°–∫–æ—Ä–ø–∏–æ–Ω, –†—ã–±—ã",
    "–°—Ç—Ä–µ–ª–µ—Ü, –û–≤–µ–Ω", "–ö–æ–∑–µ—Ä–æ–≥, –¢–µ–ª–µ—Ü", "–í–æ–¥–æ–ª–µ–π, –ë–ª–∏–∑–Ω–µ—Ü—ã", "–†—ã–±—ã, –†–∞–∫"
]

# –ó–∞–≥—Ä—É–∑–∫–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
if os.path.exists(USED_FILE):
    with open(USED_FILE, "r", encoding="utf-8") as f:
        used = json.load(f)
else:
    used = {"predictions": [], "cards": []}

def generate_unique_prediction():
    while True:
        prediction = f"{random.choice(start_phrases)} {random.choice(middle_phrases)}, {random.choice(end_phrases)}."
        if prediction not in used["predictions"]:
            used["predictions"].append(prediction)
            if len(used["predictions"]) > 10000:
                used["predictions"] = []  # —Å–±—Ä–æ—Å –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            return prediction

def generate_unique_card():
    available_cards = [c for c in tarot_cards if c not in used["cards"]]
    if not available_cards:
        used["cards"] = []  # —Å–±—Ä–æ—Å, –µ—Å–ª–∏ –≤—Å–µ –∫–∞—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã
        available_cards = tarot_cards.copy()
    card = random.choice(available_cards)
    used["cards"].append(card)
    return card

def generate_horoscope(sign, compat):
    date_str = datetime.now().strftime("%d %B %Y").capitalize()
    prediction = generate_unique_prediction()
    card = generate_unique_card()
    focus = random.choice(["–≠–Ω–µ—Ä–≥–∏—è", "–†–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ò–Ω—Ç—É–∏—Ü–∏—è", "–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ", "–ì–∞—Ä–º–æ–Ω–∏—è"])

    return f"""**{sign}, {date_str}**

üí° –ü—Ä–æ–≥–Ω–æ–∑: {prediction}

üé¥ –ö–∞—Ä—Ç–∞ –¥–Ω—è: ***{card}***

üéØ –§–æ–∫—É—Å –¥–Ω—è: {focus}
üíû –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: {compat}

üîÆ [–ù–∞—É—á–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø](https://t.me/+QIQFGYWwkLhiYjFi)"""

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
def save_used():
    with open(USED_FILE, "w", encoding="utf-8") as f:
        json.dump(used, f, ensure_ascii=False, indent=2)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
def send_horoscopes():
    for
